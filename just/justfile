# Prerequisites: just and fish

set shell := ["fish","-c"]
set ignore-comments

# Add directories {{{1
directories:
	if not test -d ~/.local/bin; mkdir -p ~/.local/bin; end
	if not test -d ~/.local/share; mkdir -p ~/.local/share; end
	if not test -d ~/tmp; mkdir -p ~/tmp; end

#Fedora console apps {{{1
dnf-misc:
	sudo dnf install -y micro ugrep fd-find wget duf mosh bat fzf fastfetch


#Fish config and Fisher plugin manager {{{1
fish_shell:
	sudo chsh -s /usr/bin/fish andmalc
	#Fisher install to location $fisher_path
	curl -sL https://raw.githubusercontent.com/jorgebucaran/fisher/main/functions/fisher.fish | source && fisher install jorgebucaran/fisher
	#install plugins in fish_plugins
	
	#TODO - how to run 'fisher update'

#Fish plugins additional
#fish_fisher_additional:
#fish-fastdir
#https://github.com/danhper/fish-fastdir
#	fisher install tuvistavie/fish-fastdir


#Nvim {{{1
nvim-nightly:
	sudo dnf copr enable agriffis/neovim-nightly
	sudo dnf install -y neovim python3-neovim

	#sudo dnf install -y neovim
	#Nvim-Plug
	sh -c "curl -fLo $HOME/.local/share/nvim/site/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim"

# Chezmoi {{{1
chezmoi-install-init:
	#Installs to local bin
	sh -c "$(curl -fsLS get.chezmoi.io/lb)" -- init --apply git@github.com:andmalc/dotfiles.git


#Eget https://github.com/zyedidia/eget {{{1
eget:
	curl https://zyedidia.github.io/eget.sh | sh
	mv eget ~/.local/bin


#Broot file browser {{{1
broot:
	sudo dnf copr enable -y petersen/broot
	sudo dnf update -y
	sudo dnf install -y broot




#Zellij {{{1
zellij:
	eget --upgrade-only --to ~/.local/bin/zellij zellij-org/zellij

#Elvish shell {{{1
elvish:
	wget -O - https://dl.elv.sh/linux-386/elvish-HEAD.tar.gz | tar xzvf - -C ~/.local/bin  --show-transformed  --transform='s/-HEAD//'
	#alternative curl -s -L <URL>


# vim: fdm=marker ft=make
